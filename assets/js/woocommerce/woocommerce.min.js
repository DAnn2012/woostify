"use strict";function cartSidebarOpen(){document.body.classList.contains("no-cart-sidebar")||document.documentElement.classList.add("cart-sidebar-open")}function eventCartSidebarOpen(){document.body.classList.add("updating-cart"),document.body.classList.remove("cart-updated")}function eventCartSidebarClose(){document.body.classList.add("cart-updated"),document.body.classList.remove("updating-cart")}function shoppingBag(){var t=document.getElementsByClassName("shopping-bag-button"),e=document.getElementById("shop-cart-sidebar");if(t.length&&e&&!document.body.classList.contains("woocommerce-cart")&&!document.body.classList.contains("woocommerce-checkout"))for(var o=0,n=t.length;o<n;o++)t[o].addEventListener("click",(function(t){t.preventDefault(),cartSidebarOpen(),closeAll()}))}var woostifyConditionScrolling=function(){return!!(document.body.classList.contains("woocommerce-demo-store")&&-1===document.cookie.indexOf("store_notice")||(document.body.classList.contains("has-order-sticky-button")||document.body.classList.contains("has-proceed-sticky-button"))&&window.innerWidth<768)},woostifyStockQuantityProgressBar=function(){var t=document.querySelectorAll(".woostify-single-product-stock-progress-bar");t.length&&t.forEach((function(t,e){var o=t.getAttribute("data-number")||0;t.style.width=o+"%"}))},woostifyQuantityMiniCart=function(){var t=document.querySelector(".shopping-bag-button .shop-cart-count, .boostify-count-product"),e=document.querySelectorAll(".mini-cart-product-infor");e.length&&t?(t.classList.remove("hide"),e.forEach((function(t,e){var o=t.querySelectorAll(".mini-cart-product-qty"),n=t.querySelector("input.qty"),c=n.getAttribute("data-cart_item_key")||"",r=new Event("change"),a=new Event("quantity_updated");if(o.length&&n){e=0;for(var i=o.length;e<i;e++)o[e].onclick=function(){var t=Number(n.value||0),e=Number(n.getAttribute("step")||1),o=Number(n.getAttribute("min")||1),c=Number(n.getAttribute("max")),a=this.getAttribute("data-qty");if(t<1||isNaN(t))alert(woostify_woocommerce_general.qty_warning);else{if("minus"===a){if(t<=o||t-e<o||t<=e)return;n.value=t-e}else if("plus"===a){if(c&&(t>=c||t+e>=c))return;n.value=t+e}n.dispatchEvent(r)}};n.addEventListener("change",(function(){var t=Number(n.value||0);if(t<1||isNaN(t))alert(woostify_woocommerce_general.qty_warning);else{var e=new Request(woostify_woocommerce_general.ajax_url,{method:"POST",body:"action=update_quantity_in_mini_cart&ajax_nonce="+woostify_woocommerce_general.ajax_nonce+"&key="+c+"&qty="+t,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});document.documentElement.classList.add("mini-cart-updating"),fetch(e).then((function(t){if(200!==t.status)throw alert(woostify_woocommerce_general.ajax_error),console.log("Status Code: "+t.status),t;return t.json()})).then((function(t){if(t.success){var e=t.data,o=document.querySelector(".cart-sidebar-content .woocommerce-mini-cart__total .woocommerce-Price-amount.amount"),n=document.querySelectorAll(".woostify-header-total-price, .boostify-subtotal"),c=document.querySelectorAll(".shop-cart-count, .boostify-count-product");if(o&&(o.innerHTML=e.total_price,n.length))for(var r=0,a=n.length;r<a;r++)n[r].innerHTML=e.total_price;if(c.length)for(var i=0,u=c.length;i<u;i++)c[i].innerHTML=e.item}})).catch((function(t){console.log(t)})).finally((function(){document.documentElement.classList.remove("mini-cart-updating"),document.dispatchEvent(a)}))}}))}}))):t&&t.classList.add("hide")},updateHeaderCartPrice=function(){var t=document.querySelector(".cart-sidebar-content .woocommerce-mini-cart__total .woocommerce-Price-amount.amount"),e=document.querySelectorAll(".woostify-header-total-price"),o=document.querySelector(".woostify-header-total-price .woocommerce-Price-currencySymbol, .boostify-subtotal .woocommerce-Price-currencySymbol");if(e.length)for(var n=0,c=e.length;n<c;n++)e[n].innerHTML=t?'<span class="woocommerce-Price-amount amount">'+t.innerHTML+"</span>":'<span class="woocommerce-Price-amount amount"><bdi><span class="woocommerce-Price-currencySymbol">'+o.innerHTML+"</span>0</bdi></span>"},stickyOrderReview=function(){new WSYSticky("form.woocommerce-checkout .woostify-col .col-right-inner",{stickyContainer:"form.woocommerce-checkout",marginTop:96})},checkoutOrder=function(){var t=document.querySelector(".before-checkout"),e=t.offsetHeight,o=e,n=document.querySelector(".showlogin");function c(){setTimeout((function(){var e=t.offsetHeight;document.querySelector("#checkout-spacer").style.minHeight=e+"px",t.classList.add("ready")}),200)}c(),document.body.addEventListener("click",(function(t){if(t.target===n){var r=setInterval((function(){c()}),50);setTimeout((function(){e==o&&clearInterval(r)}),2e3)}}))};document.addEventListener("DOMContentLoaded",(function(){shoppingBag(),woostifyQuantityMiniCart(),window.addEventListener("load",(function(){woostifyStockQuantityProgressBar()})),jQuery(document.body).on("adding_to_cart",(function(){eventCartSidebarOpen(),document.body.classList.contains("disabled-sidebar-cart")||cartSidebarOpen()})).on("added_to_cart",(function(t,e,o,n){if(woostifyQuantityMiniCart(),updateHeaderCartPrice(),eventCartSidebarClose(),closeAll(),n=void 0!==n&&n){if(n.removeClass("loading"),e&&n.addClass("added"),e&&!wc_add_to_cart_params.is_cart&&0===n.parent().find(".added_to_cart").length){var c=get_svg_icon("shopping-cart-full");n.after('<a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+c+wc_add_to_cart_params.i18n_view_cart+"</a>")}jQuery(document.body).trigger("wc_cart_button_updated",[n])}})).on("removed_from_cart",(function(){woostifyQuantityMiniCart(),updateHeaderCartPrice()})).on("updated_cart_totals",(function(){"function"==typeof customQuantity&&customQuantity(),woostifyQuantityMiniCart(),updateHeaderCartPrice()})).on("wc_fragments_loaded wc_fragments_refreshed",(function(){woostifyQuantityMiniCart(),updateHeaderCartPrice()})).on("wc_cart_emptied",(function(){location.reload()})),jQuery(document.body).on("init_checkout updated_checkout payment_method_selected",(function(t,e){jQuery("form.checkout").arrive(".woocommerce-NoticeGroup",(function(){jQuery(".woostify-woocommerce-NoticeGroup").append(jQuery(".woocommerce-NoticeGroup").html()),jQuery(".woocommerce-NoticeGroup").remove()}))})),"1"===woostify_woocommerce_general.enable_sticky_order_review_checkout&&(checkoutOrder(),stickyOrderReview())}));