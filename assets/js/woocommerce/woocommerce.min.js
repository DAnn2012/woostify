"use strict";function cartSidebarOpen(){document.documentElement.classList.add("cart-sidebar-open")}function eventCartSidebarOpen(){document.body.classList.add("updating-cart"),document.body.classList.remove("cart-updated")}function eventCartSidebarClose(){document.body.classList.add("cart-updated"),document.body.classList.remove("updating-cart")}function shoppingBag(){var t=document.getElementsByClassName("shopping-bag-button");if(t.length&&!document.body.classList.contains("woocommerce-cart"))for(var e=0,n=t.length;e<n;e++)t[e].addEventListener("click",function(t){t.preventDefault(),cartSidebarOpen(),closeAll()})}var woostifyConditionScrolling=function(){return!!(document.body.classList.contains("woocommerce-demo-store")&&-1===document.cookie.indexOf("store_notice")||(document.body.classList.contains("has-order-sticky-button")||document.body.classList.contains("has-proceed-sticky-button"))&&window.innerWidth<768)},woostifyStockQuantityProgressBar=function(){var t=document.querySelectorAll(".woostify-single-product-stock-progress-bar");t.length&&t.forEach(function(t,e){var n=t.getAttribute("data-number")||0;t.style.width=n+"%"})},woostifyQuantityMiniCart=function(){var t=document.querySelectorAll(".mini-cart-product-infor");t.length&&t.forEach(function(t,e){var n=t.querySelectorAll(".mini-cart-product-qty"),i=t.querySelector("input.qty"),o=i.getAttribute("data-cart_item_key")||"",a=new Event("change");if(n.length&&i){e=0;for(var r=n.length;e<r;e++)n[e].onclick=function(){var t=parseInt(i.value||0),e=parseInt(i.getAttribute("min")||1),n=parseInt(i.getAttribute("max")),o=this.getAttribute("data-qty");if(console.log(e),t<1||isNaN(t))alert(woostify_woocommerce_general.qty_warning);else{if("minus"===o){if(t<=e)return;i.value=t-1}else if("plus"===o){if(n&&n<=t)return;i.value=t+1}console.log(123),i.dispatchEvent(a)}};i.addEventListener("change",function(){var t=parseInt(i.value||0);if(t<1||isNaN(t))alert(woostify_woocommerce_general.qty_warning);else{var e=new Request(woostify_woocommerce_general.ajax_url,{method:"POST",body:"action=update_quantity_in_mini_cart&ajax_nonce="+woostify_woocommerce_general.ajax_nonce+"&key="+o+"&qty="+t,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});document.documentElement.classList.add("mini-cart-updating"),fetch(e).then(function(t){if(200!==t.status)throw alert(woostify_woocommerce_general.ajax_error),console.log("Status Code: "+t.status),t;return t.json()}).then(function(t){if(t.success){var e=t.data,n=document.querySelector(".cart-sidebar-content .woocommerce-mini-cart__total .woocommerce-Price-amount.amount"),o=document.querySelectorAll(".shop-cart-count");if(n&&(n.innerHTML=e.total_price),o.length)for(var i=0,a=o.length;i<a;i++)o[i].innerHTML=e.item}}).catch(function(t){console.log(t)}).finally(function(){document.documentElement.classList.remove("mini-cart-updating")})}})}})};document.addEventListener("DOMContentLoaded",function(){shoppingBag(),woostifyQuantityMiniCart(),window.addEventListener("scroll",function(){woostifyConditionScrolling()&&scrollingDetect()}),window.addEventListener("load",function(){woostifyStockQuantityProgressBar()}),jQuery(document.body).on("adding_to_cart",function(){eventCartSidebarOpen(),"function"==typeof woostifyAjaxSingleAddToCartButton&&cartSidebarOpen()}).on("added_to_cart",function(){woostifyQuantityMiniCart(),eventCartSidebarClose(),closeAll()}).on("removed_from_cart",function(){woostifyQuantityMiniCart()}).on("updated_cart_totals",function(t){"function"==typeof customQuantity&&customQuantity(),woostifyQuantityMiniCart()}).on("wc_fragments_loaded wc_fragments_refreshed",function(){woostifyQuantityMiniCart()})});