"use strict";function cartSidebarOpen(){document.body.classList.contains("no-cart-sidebar")||document.documentElement.classList.add("cart-sidebar-open")}function eventCartSidebarOpen(){document.body.classList.add("updating-cart"),document.body.classList.remove("cart-updated")}function eventCartSidebarClose(){document.body.classList.add("cart-updated"),document.body.classList.remove("updating-cart")}function shoppingBag(){var e=document.getElementsByClassName("shopping-bag-button"),o=document.getElementById("shop-cart-sidebar");if(e.length&&o&&!document.body.classList.contains("woocommerce-cart")&&!document.body.classList.contains("woocommerce-checkout"))for(var t=0,c=e.length;t<c;t++)e[t].addEventListener("click",(function(e){e.preventDefault(),cartSidebarOpen(),closeAll()}))}var woostifyConditionScrolling=function(){return!!(document.body.classList.contains("woocommerce-demo-store")&&-1===document.cookie.indexOf("store_notice")||(document.body.classList.contains("has-order-sticky-button")||document.body.classList.contains("has-proceed-sticky-button"))&&window.innerWidth<768)},woostifyStockQuantityProgressBar=function(){var e=document.querySelectorAll(".woostify-single-product-stock-progress-bar");e.length&&e.forEach((function(e,o){var t=e.getAttribute("data-number")||0;e.style.width=t+"%"}))},woostifyQuantityMiniCart=function(){var e=document.querySelector(".shopping-bag-button .shop-cart-count, .boostify-count-product"),o=document.querySelectorAll(".mini-cart-product-infor");o.length&&e?(e.classList.remove("hide"),o.forEach((function(e,o){var t=e.querySelectorAll(".mini-cart-product-qty"),c=e.querySelector("input.qty"),r=c.getAttribute("data-cart_item_key")||"",n=new Event("change"),a=new Event("quantity_updated");if(t.length&&c){o=0;for(var i=t.length;o<i;o++)t[o].onclick=function(){var e=Number(c.value||0),o=Number(c.getAttribute("step")||1),t=Number(c.getAttribute("min")||1),r=Number(c.getAttribute("max")),a=this.getAttribute("data-qty");if(e<1||isNaN(e))alert(woostify_woocommerce_general.qty_warning);else{if("minus"===a){if(e<=t||e-o<t||e<=o)return;c.value=e-o}else if("plus"===a){if(r&&(e>=r||e+o>=r))return;c.value=e+o}c.dispatchEvent(n)}};c.addEventListener("change",(function(){var e=Number(c.value||0);if(e<1||isNaN(e))alert(woostify_woocommerce_general.qty_warning);else{var o=new Request(woostify_woocommerce_general.ajax_url,{method:"POST",body:"action=update_quantity_in_mini_cart&ajax_nonce="+woostify_woocommerce_general.ajax_nonce+"&key="+r+"&qty="+e,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});document.documentElement.classList.add("mini-cart-updating"),fetch(o).then((function(e){if(200!==e.status)throw alert(woostify_woocommerce_general.ajax_error),console.log("Status Code: "+e.status),e;return e.json()})).then((function(e){if(e.success){var o=e.data,t=document.querySelector(".cart-sidebar-content .woocommerce-mini-cart__total .woocommerce-Price-amount.amount"),c=document.querySelectorAll(".woostify-header-total-price, .boostify-subtotal"),r=document.querySelectorAll(".shop-cart-count, .boostify-count-product");if(t&&(t.innerHTML=o.total_price,c.length))for(var n=0,a=c.length;n<a;n++)c[n].innerHTML=o.total_price;if(r.length)for(var i=0,u=r.length;i<u;i++)r[i].innerHTML=o.item}})).catch((function(e){console.log(e)})).finally((function(){document.documentElement.classList.remove("mini-cart-updating"),document.dispatchEvent(a)}))}}))}}))):e&&e.classList.add("hide")},updateHeaderCartPrice=function(){var e=document.querySelector(".cart-sidebar-content .woocommerce-mini-cart__total .woocommerce-Price-amount.amount"),o=document.querySelectorAll(".woostify-header-total-price"),t=document.querySelector(".woostify-header-total-price .woocommerce-Price-currencySymbol, .boostify-subtotal .woocommerce-Price-currencySymbol");if(o.length)for(var c=0,r=o.length;c<r;c++)o[c].innerHTML=e?'<span class="woocommerce-Price-amount amount">'+e.innerHTML+"</span>":'<span class="woocommerce-Price-amount amount"><bdi><span class="woocommerce-Price-currencySymbol">'+t.innerHTML+"</span>0</bdi></span>"},stickyOrderReview=function(){new WSYSticky("form.woocommerce-checkout .woostify-col .col-right-inner",{stickyContainer:"form.woocommerce-checkout",marginTop:96})},checkoutOrder=function(){var e=document.querySelector(".before-checkout"),o=e.offsetHeight,t=o,c=document.querySelector(".showlogin");function r(){setTimeout((function(){var o=e.offsetHeight;document.querySelector("#checkout-spacer").style.minHeight=o+"px",e.classList.add("ready")}),200)}r(),document.body.addEventListener("click",(function(e){if(e.target===c){var n=setInterval((function(){r()}),50);setTimeout((function(){o==t&&clearInterval(n)}),2e3)}}))},woostifyGetUrl=function(e){return wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%",e)},woostifyShowNotice=function(e,o){o||(o=jQuery(".woocommerce-notices-wrapper:first")||jQuery(".cart-empty").closest(".woocommerce")||jQuery(".woocommerce-cart-form")),o.prepend(e)},ajaxCouponForm=function(){document.querySelector("form.checkout_coupon").addEventListener("submit",(function(e){e.preventDefault();var o=document.getElementById("coupon_code"),t=o.value,c={security:woostify_woocommerce_general.apply_coupon_nonce,coupon_code:t};jQuery.ajax({type:"POST",url:woostifyGetUrl("apply_coupon"),data:c,dataType:"html",success:function(e){jQuery(".woocommerce-error, .woocommerce-message, .woocommerce-NoticeGroup .woocommerce-info, .woocommerce-notices-wrapper .woocommerce-info").remove(),woostifyShowNotice(e,jQuery(".woostify-woocommerce-NoticeGroup")),jQuery(document.body).trigger("applied_coupon",[t])},complete:function(){o.value="",jQuery(document.body).trigger("update_checkout")}})}))},woostifyMoveNoticesInCheckoutPage=function(){var e=document.querySelectorAll(".woocommerce-notices-wrapper");if(e.length){var o=e[0],t=document.createElement("div"),c=document.querySelector(".woostify-woocommerce-NoticeGroup");t.innerHTML=o.innerHTML,c.appendChild(t),o.remove()}};document.addEventListener("DOMContentLoaded",(function(){shoppingBag(),woostifyQuantityMiniCart(),window.addEventListener("load",(function(){woostifyStockQuantityProgressBar()})),jQuery(document.body).on("adding_to_cart",(function(){eventCartSidebarOpen(),document.body.classList.contains("disabled-sidebar-cart")||cartSidebarOpen()})).on("added_to_cart",(function(e,o,t,c){if(woostifyQuantityMiniCart(),updateHeaderCartPrice(),eventCartSidebarClose(),closeAll(),c=void 0!==c&&c){if(c.removeClass("loading"),o&&c.addClass("added"),o&&!wc_add_to_cart_params.is_cart&&0===c.parent().find(".added_to_cart").length){var r=get_svg_icon("shopping-cart-full");c.after('<a href="'+wc_add_to_cart_params.cart_url+'" class="added_to_cart wc-forward" title="'+wc_add_to_cart_params.i18n_view_cart+'">'+r+wc_add_to_cart_params.i18n_view_cart+"</a>")}jQuery(document.body).trigger("wc_cart_button_updated",[c])}})).on("removed_from_cart",(function(){woostifyQuantityMiniCart(),updateHeaderCartPrice()})).on("updated_cart_totals",(function(){"function"==typeof customQuantity&&customQuantity(),woostifyQuantityMiniCart(),updateHeaderCartPrice()})).on("wc_fragments_loaded wc_fragments_refreshed",(function(){woostifyQuantityMiniCart(),updateHeaderCartPrice()})).on("wc_cart_emptied",(function(){location.reload()})),document.body.classList.contains("checkout-layout-3")&&(woostifyMoveNoticesInCheckoutPage(),jQuery(document.body).on("init_checkout updated_checkout payment_method_selected",(function(e,o){jQuery("form.checkout").arrive(".woocommerce-NoticeGroup",(function(){jQuery(".woostify-woocommerce-NoticeGroup").append(jQuery(".woocommerce-NoticeGroup").html()),jQuery(".woocommerce-NoticeGroup").remove()})),jQuery(document).arrive(".woocommerce > .woocommerce-message",(function(e){var o=jQuery(e).clone();jQuery(".woostify-woocommerce-NoticeGroup").append(o),jQuery(e).remove()}))})).on("updated_checkout",(function(){ajaxCouponForm()}))),"1"===woostify_woocommerce_general.enable_sticky_order_review_checkout&&(checkoutOrder(),stickyOrderReview())}));