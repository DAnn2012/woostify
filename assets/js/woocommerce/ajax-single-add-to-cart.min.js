"use strict";function woostifyAjaxSingleHandleError(e){"function"==typeof eventCartSidebarClose&&eventCartSidebarClose(),e.classList.remove("loading"),document.documentElement.classList.remove("quick-view-open")}function woostifyAjaxSingleUpdateFragments(e){let t=document.querySelectorAll(".free-shipping-progress-bar"),n=0;t.length&&(n=parseInt(t[0].getAttribute("data-progress"))),fetch(wc_cart_fragments_params.wc_ajax_url.toString().replace("%%endpoint%%","get_refreshed_fragments"),{method:"POST"}).then((function(e){return e.json()})).then((function(e){void 0!==e.fragments&&Object.entries(e.fragments).forEach((function([e,t]){let n=document.querySelectorAll(e);n.length&&n.forEach((function(e){e.insertAdjacentHTML("afterend",t),e.remove()}))}))})).finally((function(){woostifyAjaxSingleHandleError(e),jQuery(document.body).trigger("added_to_cart");let o=document.querySelectorAll(".free-shipping-progress-bar"),r=0;if(o.length&&(r=parseInt(o[0].getAttribute("data-progress"))),!t.length&&r>=100||n<r&&r>=100){let e=document.createElement("canvas");e.className="confetti-canvas",document.querySelector("#shop-cart-sidebar").appendChild(e);let t=confetti.create(e,{resize:!0});confettiSnowEffect(t,4e3),setTimeout((function(){t.reset(),document.querySelector(".confetti-canvas").remove()}),4e3)}n=r}))}function woostifyAjaxSingleAddToCartButton(){var e=document.querySelectorAll(".single_add_to_cart_button");e.length&&e.forEach((function(e){e.onclick=function(t){t.preventDefault();var n=e.closest("form.cart");n&&(e.classList.add("loading"),"function"==typeof eventCartSidebarOpen&&eventCartSidebarOpen(),"function"==typeof closeAll&&closeAll(),fetch(n.action,{method:"POST",body:new FormData(n)}).then((function(e){return e.text()})).then((function(t){var n=document.createElement("div");n.innerHTML=t;var o=n.querySelector(".woocommerce-error");if(o){var r=document.querySelector(".content-top .woocommerce");return r.querySelector(".woocommerce-error")&&r.querySelector(".woocommerce-error").remove(),r&&r.appendChild(o),void woostifyAjaxSingleHandleError(e)}woostifyAjaxSingleUpdateFragments(e)})).catch((function(){woostifyAjaxSingleHandleError(e)})))}}))}document.addEventListener("DOMContentLoaded",(function(){woostifyAjaxSingleAddToCartButton()}));