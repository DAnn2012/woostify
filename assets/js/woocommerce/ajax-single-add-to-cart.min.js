"use strict";function woostifyAjaxSingleAddToCartButton(){var t=document.querySelectorAll(".single_add_to_cart_button");t.length&&t.forEach(function(s){var l=s.closest("form.cart"),d=l.classList.contains("variations_form"),t=l.querySelector('[name="add-to-cart"]'),u=!!t&&t.value,_=l.querySelector(".qty"),f=l.querySelector(".additional-product"),v=!1,y={};if(d)var m=l.querySelector('[name="product_id"]'),g=l.querySelector('[name="variation_id"]'),p=l.querySelectorAll('select[name^="attribute"]');!u||l.classList.contains("grouped_form")||l.classList.contains("mnm_form")||s.addEventListener("click",function(t){t.preventDefault();var e={};if(l.querySelector('[name="wcgwp_action"]')){var a=l.querySelector('[name="wcgwp_single_product"]:checked'),o=l.querySelector('[name="wcgwp_single_product_note"]');a&&(e.gift_product_id=a.value),o&&(e.gift_product_note=o.value.trim())}var n=_?parseInt(_.value):0;d&&(u=m.value,v=g.value,p.forEach(function(t){var e=t.name,a=t.value;y[e]=a}));var i=document.querySelector(".cart-sidebar-content"),c=document.getElementsByClassName("shop-cart-count");if(_.classList.contains("ajax-ready")){s.classList.add("loading"),f&&(f.value=+f.value+ +_.value),"function"==typeof eventCartSidebarOpen&&eventCartSidebarOpen(),"function"==typeof cartSidebarOpen&&cartSidebarOpen(),"function"==typeof closeAll&&closeAll();var r=new Request(woostify_ajax_single_add_to_cart_data.ajax_url,{method:"POST",body:"action=single_add_to_cart&ajax_nonce="+woostify_ajax_single_add_to_cart_data.ajax_nonce+"&product_id="+u+"&product_qty="+n+"&variation_id="+v+"&variations="+JSON.stringify(y)+"&cart_item_data="+JSON.stringify(e),credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(r).then(function(t){if(200!==t.status)throw alert(woostify_ajax_single_add_to_cart_data.ajax_error),console.log("Status Code: "+t.status),t;return t.json()}).then(function(t){if(t.success){var e=t.data;if(c.length)for(var a=0,o=c.length;a<o;a++)c[a].innerHTML=e.item;if(i&&(i.innerHTML=e.content),s.classList.contains("woostify-buy-now")){var n=s.getAttribute("data-checkout_url");window.location=n}var r=document.querySelector(".woostify-total-price");r&&(r.innerHTML=e.total)}}).catch(function(t){console.log(t)}).finally(function(){"function"==typeof eventCartSidebarClose&&eventCartSidebarClose(),s.classList.remove("loading"),document.documentElement.classList.remove("quick-view-open"),jQuery(document.body).trigger("added_to_cart")})}})})}document.addEventListener("DOMContentLoaded",function(){woostifyAjaxSingleAddToCartButton()});