"use strict";var woostifyFormData=function(t){for(var e=[],a=0,n=t.elements.length;a<n;a++){var o=t.elements[a];o.name&&!o.disabled&&"reset"!==o.type&&(e[e.length]={name:o.name,value:o.value})}return e};function woostifyAjaxSingleAddToCartButton(){var t=document.querySelectorAll(".single_add_to_cart_button");t.length&&t.forEach((function(t){var e=t.closest("form.cart"),a=e.classList.contains("variations_form"),n=e.querySelector('[name="add-to-cart"]'),o=!!n&&n.value,r=e.querySelector(".qty"),i=!1,c={};if(a)var s=e.querySelector('[name="product_id"]'),l=e.querySelector('[name="variation_id"]'),u=e.querySelectorAll('select[name^="attribute"]');if(o&&!e.classList.contains("grouped_form")&&!e.classList.contains("mnm_form")&&!e.classList.contains("bundle_form")){var d=e.querySelector(".additional-product"),f=d?d.getAttribute("data-in_stock"):"no",_=d?d.getAttribute("data-out_of_stock"):"Out of stock",v=d?d.getAttribute("data-not_enough"):"",y=(d&&d.getAttribute("data-valid_quantity"),0);t.onclick=function(n){n.preventDefault();var m=!0,g=t.classList.contains("disabled"),p=e.querySelector(".quantity.hidden"),S=r?parseInt(r.value):0,w=d?parseInt(d.value):0,b=(parseInt(r.getAttribute("min")||0),parseInt(r.getAttribute("max")));if(a&&(o=s.value,i=l.value,u.forEach((function(t){var e=t.name,a=t.value;a?c[e]=a:m=!1}))),!g&&m)if("yes"==f&&p&&(w>0||y>0))alert(_);else if(!isNaN(b)&&w>=b)alert(_);else if(!isNaN(b)&&+S+ +w>b)alert(v);else{var h={};if(e.querySelector('[name="wcgwp_action"]')){var q=e.querySelector('[name="wcgwp_single_product"]:checked'),A=e.querySelector('[name="wcgwp_single_product_note"]');q&&(h.gift_product_id=q.value),A&&(h.gift_product_note=A.value.trim())}var L=document.querySelector(".cart-sidebar-content"),j=document.querySelectorAll(".shop-cart-count");if(r.classList.contains("ajax-ready")){t.classList.add("loading"),d&&(d.value=+d.value+ +r.value),"function"==typeof eventCartSidebarOpen&&eventCartSidebarOpen(),"function"==typeof cartSidebarOpen&&cartSidebarOpen(),"function"==typeof closeAll&&closeAll();var x={action:"single_add_to_cart",ajax_nonce:woostify_ajax_single_add_to_cart_data.ajax_nonce,product_id:o,product_qty:S,variation_id:i,variations:JSON.stringify(c),gift_wrap_data:JSON.stringify(h)};x=new URLSearchParams(x).toString();var C=new Request(woostify_ajax_single_add_to_cart_data.ajax_url,{method:"POST",body:x,credentials:"same-origin",headers:new Headers({"Content-Type":"application/x-www-form-urlencoded; charset=utf-8"})});fetch(C).then((function(t){if(200!==t.status)throw alert(woostify_ajax_single_add_to_cart_data.ajax_error),console.log("Status Code: "+t.status),t;return t.json()})).then((function(e){if(e.success){var a=e.data;if(j.length)for(var n=0,o=j.length;n<o;n++)j[n].innerHTML=a.item;if(L&&(L.innerHTML=a.content),t.classList.contains("woostify-buy-now")){var r=t.getAttribute("data-checkout_url");window.location=r}var i=document.querySelector(".woostify-total-price");i&&(i.innerHTML=a.total),y++}})).catch((function(t){console.log(t)})).finally((function(){"function"==typeof eventCartSidebarClose&&eventCartSidebarClose(),t.classList.remove("loading"),document.documentElement.classList.remove("quick-view-open"),jQuery(document.body).trigger("added_to_cart")}))}}}}}))}document.addEventListener("DOMContentLoaded",(function(){woostifyAjaxSingleAddToCartButton()}));