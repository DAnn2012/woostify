"use strict";var woostifyValidateEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},woostifyExpandOrderReview=function(){var e=document.querySelector("form.woocommerce-checkout"),t=!!e&&e.querySelector(".woostify-before-order-review"),i=1;t&&(t.onclick=function(){i=1===i?(e.classList.add("expanded-order-review"),2):(e.classList.remove("expanded-order-review"),1)})},woostifyMultiStepCheckout=function(){var a=document.querySelector(".multi-step-checkout");if(a){var b=a.querySelectorAll(".multi-step-item"),_=document.querySelector("form.woocommerce-checkout");if(b.length&&_){var e=_.querySelector("#shipping_method"),t=_.querySelector(".wc_payment_methods"),i=_.querySelector(".woocommerce-terms-and-conditions-wrapper"),E=_.querySelector(".multi-step-checkout-wrapper"),o=(_.querySelector('.multi-step-checkout-content[data-step="first"]'),_.querySelector('.multi-step-checkout-content[data-step="second"]')),r=_.querySelector('.multi-step-checkout-content[data-step="last"]'),c=_.querySelector(".multi-step-checkout-button-wrapper"),A=_.querySelectorAll(".woocommerce-billing-fields__field-wrapper .validate-required"),n=c?c.querySelectorAll(".multi-step-checkout-button"):[];if(n.length&&n.forEach(function(l){l.onclick=function(){var e=l.getAttribute("data-action"),t=a.querySelector(".multi-step-item.active"),i=!!t&&t.previousElementSibling,o=!!t&&t.nextElementSibling,r=_.querySelector('.multi-step-checkout-content [name="terms"]'),c=!r||r.checked,n=_.querySelector(".multi-step-checkout-content .woocommerce-terms-and-conditions-checkbox-text");if("back"==e&&i&&i.click(),"continue"==e&&o&&o.click(),"place_order"==e){if(r&&n){if(!c)return void n.classList.add("required-item");n.classList.remove("required-item")}document.getElementById("place_order").click()}}}),e&&o){var l=e.querySelectorAll(".shipping_method"),s="";l.length&&(s+='<div class="shipping-methods-modified">',l.forEach(function(e,t){var i="checked"==e.getAttribute("checked")?'checked="checked"':"",o=e.nextElementSibling;s+='<div class="shipping-methods-modified-item">',s+='<label class="shipping-methods-modified-label" for="shipping-methods-index-'+t+'"><input type="radio" '+i+' name="ahihi-dongu-name" id="shipping-methods-index-'+t+'" class="shipping-methods-modified-input"><span>'+o.innerHTML+"</span></label>",s+="</div>"}),s+="</div>"),o.insertAdjacentHTML("beforeend",s);var d=document.querySelectorAll(".shipping-methods-modified-input");d.length&&d.forEach(function(e,i){e.onclick=function(){var e=i+1,t=document.querySelector("#shipping_method li:nth-of-type("+e+') input[type="radio"]');t&&t.click()}})}if(t&&r){var u='<ul class="wc_payment_methods payment_methods methods">'+t.innerHTML+"</ul>";r.insertAdjacentHTML("beforeend",u);var m=document.querySelectorAll('.multi-step-checkout-content .wc_payment_methods [name="payment_method"]');if(m.length&&m.forEach(function(t){var i=document.querySelector('.multi-step-checkout-button[data-action="place_order"]'),o=i.innerHTML;t.onclick=function(){var e=t.getAttribute("data-order_button_text");i.innerHTML=i&&e?e:o}}),i){var p='<div class="woocommerce-terms-and-conditions-wrapper">'+i.innerHTML+"</div>";r.insertAdjacentHTML("beforeend",p)}}A.length&&A.forEach(function(t){var i=t.querySelector("[name]");i&&i.addEventListener("input",function(){var e=i.value.trim();e?"email"==i.type?woostifyValidateEmail(e)?t.classList.remove("field-required"):t.classList.add("field-required"):t.classList.remove("field-required"):t.classList.add("field-required")})}),b.forEach(function(S,L){S.onclick=function(){var o=!1;if(A.length&&A.forEach(function(e){var t=e.querySelector("[name]");if(t){var i=t.value.trim();if(!i)return o=!0,void e.classList.add("field-required");if("email"==t.type){if(!woostifyValidateEmail(i))return o=!0,void e.classList.add("field-required");e.classList.remove("field-required")}else e.classList.remove("field-required")}}),!o){var e=siblings(S);S.classList.add("active"),e.length&&e.forEach(function(e){e.classList.remove("active")});var t=_.querySelector('.multi-step-checkout-content [name="terms"]'),i=_.querySelector(".multi-step-checkout-content .woocommerce-terms-and-conditions-checkbox-text");t&&i&&t.addEventListener("change",function(){this.checked&&i.classList.remove("required-item")});var r=document.querySelectorAll(".multi-step-review-information"),c=document.getElementById("billing_email"),n=c?c.value.trim():"",l=document.getElementById("billing_address_1"),a=document.getElementById("billing_address_2"),s=document.getElementById("billing_city"),d=document.getElementById("billing_country"),u=!!d&&d.querySelector("#billing_country option["+d.value+"]"),m=document.querySelector('#shipping_method .shipping_method[checked="checked"]'),p=!!m&&m.id,f=!!p&&document.querySelector('#shipping_method label[for="'+p+'"]'),h=l?l.value.trim():"";h+=a?" "+a.value.trim():"",h+=s?" "+s.value.trim():"",h+=u?" "+u.value.trim():"",r.length&&r.forEach(function(e){var t=e.querySelector('.multi-step-review-information-row[data-type="email"] .review-information-content'),i=e.querySelector('.multi-step-review-information-row[data-type="address"] .review-information-content'),o=e.querySelector('.multi-step-review-information-row[data-type="shipping"] .review-information-content');t&&(t.innerHTML=n),i&&(i.innerHTML=h),o&&f&&(o.innerHTML=f.innerHTML)});var v=document.querySelectorAll(".review-information-link");v.length&&v.forEach(function(i){i.onclick=function(){var e=i.closest(".multi-step-review-information-row"),t=!!e&&e.getAttribute("data-type");if(t)switch(t){default:case"email":b[0].click(),c&&c.focus();break;case"address":b[0].click(),l&&l.focus();break;case"shipping":b[1].click()}}});var y=L+1,g=E.querySelector(".multi-step-checkout-content.active"),q=E.querySelector(".multi-step-checkout-content:nth-of-type("+y+")");g&&g.classList.remove("active"),q&&q.classList.add("active");var k=0==L,w=y==b.length;E.classList.remove("first","last"),k?E.classList.add("first"):w&&E.classList.add("last")}}})}}};document.addEventListener("DOMContentLoaded",function(){woostifyMultiStepCheckout(),woostifyExpandOrderReview()});